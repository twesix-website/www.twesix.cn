{"version":3,"sources":["audio-visualization/prototype.js","audio-visualization/types/spectrum.js","audio-visualization/index.js","components/music.vue","components/my-navigation.vue","components/root.vue","entry.js"],"names":["prototype","prepareAPI","window","AudioContext","webkitAudioContext","mozAudioContext","msAudioContext","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","e","console","log","alert","init","that","audioSource","canvas","options","__prepareAPI","__audioSource","__canvas","__options","__ctx","getContext","__audioContext","__dataSource","createMediaElementSource","__analyser","createAnalyser","connect","destination","__interval","clearCanvas","clearRect","width","height","getByteFrequencyData","array","Uint8Array","frequencyBinCount","defaultOptions","meterWidth","gapWidth","capHeight","capFallSpeed","capColor","gradientLength","gradientStartColor","gradientMiddleColor","gradientEndColor","Spectrum","Object","assign","__init","__calculateSize","gradient","createLinearGradient","addColorStop","__clearCanvas","__getByteFrequencyData","meter","gap","num","parseInt","meterNum","meterNUm","resize","self","start","__draw","stop","clearInterval","capPositions","capInitialPosition","ctx","bind","length","push","draw_meter","step","Math","round","i","value","fillStyle","x","y","fillRect","setInterval","AudioVisualizer","app","Vue","el","template","name","components","root"],"mappings":"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","file":"entry.c58eb246.js","sourceRoot":"../src","sourcesContent":["const prototype = {};\n\nprototype.prepareAPI = function()\n{\n    window.AudioContext =\n        window.AudioContext ||\n        window.webkitAudioContext ||\n        window.mozAudioContext ||\n        msAudioContext\n    window.requestAnimationFrame =\n        window.requestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.msRequestAnimationFrame\n    try\n    {\n        new window.AudioContext()\n        return true\n    }\n    catch(e)\n    {\n        console.log(e)\n        alert('浏览器颜值太低, 音乐不想来见你 ！');\n        return false\n    }\n}\n\nprototype.init = function(that, audioSource, canvas, options)\n{\n    if( ! this.__prepareAPI())\n    {\n        return false\n    }\n\n    that.__audioSource=audioSource;\n    that.__canvas = canvas\n    const __options = options\n    that.__options = __options\n\n    that.__ctx = that.__canvas.getContext('2d')\n    that.__audioContext= new window.AudioContext()\n    that.__dataSource=that.__audioContext.createMediaElementSource(that.__audioSource);\n\n    that.__analyser=that.__audioContext.createAnalyser()\n    that.__dataSource.connect(that.__analyser)\n    that.__analyser.connect(that.__audioContext.destination);\n\n    that.__interval = null\n\n    return true\n}\n\nprototype.clearCanvas = function()\n{\n    this.__ctx.clearRect(0, 0, this.__canvas.width, this.__canvas.height);\n}\n\nprototype.getByteFrequencyData = function()\n{\n    const array=new Uint8Array(this.__analyser.frequencyBinCount);\n    this.__analyser.getByteFrequencyData(array);\n    return array\n}\n\nexport default prototype","import prototype from '../prototype'\n\nconst defaultOptions =\n    {\n        meterWidth: 20,\n        gapWidth: 2,\n        capHeight: 3,\n        capFallSpeed: 3,\n        capColor: '#ff2f3f',\n        gradientLength: 1080,\n        gradientStartColor: '#5bbeff',\n        gradientMiddleColor: '#aad8ff',\n        gradientEndColor: '#fb9c7a',\n    }\n    // TODO: design beautiful gradients\n    // TODO: optimize rendering\n\nconst Spectrum=function(audioSource, canvas, options = {})\n{\n    const __options = Object.assign(defaultOptions, options)\n    if( ! this.__init(this, audioSource, canvas, __options)) return\n\n    this.__calculateSize()\n\n    const gradient=this.__ctx.createLinearGradient(0,0,0,this.__options.gradientLength)\n    gradient.addColorStop(1,this.__options.gradientStartColor)\n    gradient.addColorStop(0.5,this.__options.gradientMiddleColor)\n    gradient.addColorStop(0,this.__options.gradientEndColor)\n    this.__options.gradient = gradient\n\n};\n\nSpectrum.prototype=\n    {\n        __prepareAPI: prototype.prepareAPI,\n        __init: prototype.init,\n        __clearCanvas: prototype.clearCanvas,\n        __getByteFrequencyData: prototype.getByteFrequencyData,\n        __calculateSize: function()\n        {\n            const width = this.__canvas.width\n            const meter = this.__options.meterWidth\n            const gap = this.__options.gapWidth\n            let num\n            num = parseInt(width / (meter + gap))\n            if(width % (num * (meter + gap)) < meter)\n            {\n                this.__options.meterNum = num\n            }\n            else\n            {\n                this.__options.meterNUm = num + 1\n            }\n        },\n        resize: function()\n        {\n            const self = this\n            self.__calculateSize()\n        },\n        start: function()\n        {\n            this.__draw();\n        },\n        stop: function()\n        {\n            clearInterval(this.__interval)\n        },\n        __draw:function()\n        {\n            const self = this\n            const options = this.__options\n            const capPositions=[]\n            const capInitialPosition = 0\n            const canvas = this.__canvas\n            const ctx=this.__ctx;\n            const clearCanvas = this.__clearCanvas.bind(this)\n            const getByteFrequencyData = this.__getByteFrequencyData.bind(this)\n            while(capPositions.length < options.meterNum)\n            {\n                capPositions.push(capInitialPosition);\n            }\n\n\n            const draw_meter=function()\n            {\n                const array = getByteFrequencyData();\n\n                const step=Math.round(array.length/options.meterNum);\n                clearCanvas();\n\n                for(let i = 0; i < options.meterNum; i ++)\n                {\n                    const value = array[i * step] / 256 * canvas.height\n\n                    ctx.fillStyle=options.capColor;\n                    if(value < capPositions[i])\n                    {\n                        capPositions[i] =\n                            capPositions[i]-options.capFallSpeed > capInitialPosition\n                                ?\n                                capPositions[i]-options.capFallSpeed\n                                :\n                                capInitialPosition\n                        const x = i * (options.meterWidth + options.gapWidth)\n                        const y = canvas.height - capPositions[i] - options.capHeight\n                        ctx.fillRect(x, y, options.meterWidth, options.capHeight)\n                    }\n                    else\n                    {\n                        const x = i * (options.meterWidth + options.gapWidth)\n                        const y = canvas.height - value - options.capHeight\n                        ctx.fillRect(x, y, options.meterWidth, options.capHeight)\n                        capPositions[i] = value;\n                    }\n\n                    ctx.fillStyle=options.gradient;\n                    ctx.fillRect\n                    (\n                        i * (options.meterWidth+options.gapWidth),\n                        canvas.height-value,\n                        options.meterWidth,\n                        value\n                    )\n                    // TODO: draw more small rectangles rather than one big\n                }\n            }\n            self.__interval = setInterval(function()\n            {\n                requestAnimationFrame(draw_meter)\n            }, 10)\n        }\n    };\n\nexport default Spectrum","const AudioVisualizer = {}\nwindow.AudioVisualizer = AudioVisualizer\n\nimport Spectrum from './types/spectrum'\n\nAudioVisualizer.Spectrum = Spectrum\n\nexport default AudioVisualizer","<template>\n    <div id=\"music\">\n        <div id=\"panel\">\n            <div class=\"background\"></div>\n            <div id=\"music_info\">\n                <h1 class=\"title\" id=\"music_name\">\n                    {{ audioName }}\n                </h1>\n            </div>\n            <div id=\"music_controls\">\n                <button class=\"button is-success\" @click=\"switchMusic\">&nbsp;&nbsp;<i class=\"fa fa-fast-forward\"></i>&nbsp;&nbsp;</button>\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <button class=\"button is-danger\" @click=\"musicOff\">&nbsp;&nbsp;<i class=\"fa fa-times\"></i>&nbsp;&nbsp;</button>\n            </div>\n            <audio @error=\"error\" id=\"player\" controls @canplay=\"canplay\" @ended=\"ended\" :src=\"musicUrl\" crossOrigin=\"anonymous\"></audio>\n        </div>\n        <canvas id=\"music_canvas\"></canvas>\n    </div>\n</template>\n\n<script>\n\n    import Visualizer from '../audio-visualization/'\n\n    let playlist = []\n    const baseUrl = 'https://twesix.cn/music'\n    const playListId = 971042549\n\n    ;(async function()\n    {\n        const result = await $.getJSON(`${baseUrl}/playlist/detail?id=${playListId}`)\n        playlist = JSON.parse(JSON.stringify(result.result.tracks))\n    })()\n\n    export default\n        {\n            name: 'music',\n            data: function()\n            {\n                return {\n                    audioName: ' 加载中 ',\n                    player: null,\n                    musicId: 31473269\n                };\n            },\n            computed:\n                {\n                    musicUrl: function()\n                    {\n                        return `https://twesix.cn/proxy/?url=http://music.163.com/song/media/outer/url?id=${this.musicId}.mp3`\n                    }\n                },\n            mounted: function()\n            {\n                const self = this\n\n                this.player = document.getElementById('player')\n\n                this.switchMusic()\n\n                function visualize()\n                {\n                    const canvas = document.getElementById('music_canvas')\n                    function resize()\n                    {\n                        canvas.width=canvas.clientWidth\n                        canvas.height=canvas.clientHeight\n                    }\n                    resize()\n\n                    const visualizer=new Visualizer.Spectrum(self.player, canvas);\n                    visualizer.start()\n\n                    window.addEventListener('resize', function()\n                    {\n                        resize()\n                        visualizer.resize()\n                    })\n                }\n\n                visualize()\n            },\n            methods:\n                {\n                    switchMusic: function()\n                    {\n                        this.player.pause()\n                        const music = playlist.shift()\n                        if( ! music )\n                        {\n                            setTimeout(() =>\n                            {\n                                console.log(`music list loading, wait for 100ms to switch music`)\n                                this.switchMusic()\n                            }, 100)\n                            return\n                        }\n                        playlist.push(music)\n                        this.audioName = music.name\n                        this.musicId = music.id\n                    },\n                    canplay: function()\n                    {\n                        this.player.play()\n                    },\n                    ended: function()\n                    {\n                        this.switchMusic()\n                    },\n                    musicOff: function()\n                    {\n                        this.$emit('musicOff')\n                    },\n                    error: function(e)\n                    {\n                        console.log(e)\n                        this.switchMusic()\n                    }\n                }\n        }\n\n</script>\n\n<style scoped>\n    #player\n    {\n        margin-top: 1rem;\n        width: 100%;\n        max-width: 1000px;\n    }\n    #music\n    {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        left: 0;\n        top: 0;\n        z-index: 2;\n\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n    }\n    #panel\n    {\n        height: auto;\n        text-align: center;\n        position: relative;\n        box-sizing: border-box;\n    }\n    .background\n    {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: gray;\n        opacity: .5;\n        z-index: -1;\n    }\n    #music_info\n    {\n        padding-top: 30px;\n    }\n    #music_name\n    {\n        color: white;\n    }\n    #music_canvas\n    {\n        flex-grow: 1;\n    }\n    #music_controls\n    {\n        margin: 2rem 0;\n    }\n</style>","<template>\n    <div id=\"content\">\n        <div class=\"content-wrapper\">\n            <div class=\"background\"></div>\n            <div class=\"content-inner\">\n                <h1 class=\"title has-text-centered\" id=\"title\">孟政元的个人网站</h1>\n                <br>\n                <br>\n                <div class=\"columns\" id=\"nav\">\n                    <div class=\"is-3 column\"></div>\n                    <a href=\"https://github.com/twesix\" class=\"is-2 column has-text-centered link\" target=\"_blank\">\n                        代码\n                    </a>\n                    <a @click.prevent=\"musicOn\" href=\"#\" class=\"is-2 column has-text-centered link\">\n                        音乐\n                    </a>\n                    <a href=\"https://www.jianshu.com/u/a662a629db7d\" class=\"is-2 column has-text-centered link\" target=\"_blank\">\n                        远方\n                    </a>\n                    <div class=\"is-3 column\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default\n    {\n        name: 'content',\n        methods:\n            {\n                musicOn: function()\n                {\n                    this.$emit('musicOn')\n                }\n            }\n    }\n</script>\n\n<style scoped>\n    .link\n    {\n        font-size: 1.5rem;\n    }\n    .content-wrapper\n    {\n        position: relative;\n        z-index: 1;\n    }\n    .background\n    {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: gray;\n        opacity: .5;\n    }\n    #content\n    {\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n    }\n    .content-inner\n    {\n        box-sizing: border-box;\n        padding: 30px;\n        position: relative;\n        z-index: 2;\n    }\n    #title\n    {\n        color: #cccccc;\n    }\n    a:link,\n    a:active,\n    a:visited,\n    a:hover\n    {\n        color: #cccccc\n    }\n</style>","<template>\n    <div id=\"root\" class=\"has-text-centered\" :style=\"{backgroundImage: backgroundImageUrl}\">\n\n        <div v-if=\"playingMusic\"><music @musicOff=\"musicOff\" /></div>\n        <div v-else=\"playingMusic\"><my-navigation @musicOn=\"musicOn\" /></div>\n\n    </div>\n</template>\n\n<script>\n    import music from './music.vue'\n    import myNavigation from './my-navigation.vue'\n\n    export default\n    {\n        name: 'root',\n        data: function()\n        {\n            return {\n                playingMusic: false,\n                day: false\n            }\n        },\n        beforeMount: function()\n        {\n            let day = new Date().getDate()\n            if(day < 10)\n            {\n                day = '0' + day\n            }\n            this.day = day\n        },\n        components:\n            {\n                music,\n                'my-navigation': myNavigation\n            },\n        computed:\n            {\n                backgroundImageUrl: function()\n                {\n                    return `url(https://cn-twesix-static.oss-cn-beijing.aliyuncs.com/homepage/background-images/${this.day}.jpg)`\n                }\n            },\n        methods:\n            {\n                musicOn: function()\n                {\n                    this.playingMusic = true\n                },\n                musicOff: function()\n                {\n                    this.playingMusic = false\n                }\n            }\n    }\n</script>\n\n<style>\n    html,\n    body\n    {\n        width: 100%;\n        height: 100%;\n        position: relative;\n        margin: 0;\n        padding: 0;\n        overflow: hidden;\n    }\n</style>\n\n<style scoped>\n    #root\n    {\n        width: 100%;\n        height: 100%;\n        position: relative;\n        margin: 0;\n        padding: 0;\n        overflow: hidden;\n        background: no-repeat fixed;\n        background-size: cover;\n    }\n</style>\n","import root from './components/root.vue';\n\nconst app = new Vue\n(\n    {\n        el: '#app',\n        template: '<root></root>',\n        name: 'app',\n        components:\n            {\n                root,\n            }\n    }\n);\n"]}